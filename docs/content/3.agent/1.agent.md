---
title: Agent
description: VeADK 中提供了多种类型的智能体来承载不同的任务需求
navigation:
  icon: i-lucide-lightbulb
---

VeADK 中提供了多种类型的智能体来满足应用场景需要，提供可控要求下的自主决策。其中：

- **自主决策 Agent：** 可以根据不同场景，由 LLM 自主决定调用哪些子智能体或工具
- **工作流 Agent：** 根据不同智能体类别，采用硬编码模式来提供确定性的子智能体执行顺序

## 自主决策 Agent

### 使用示例

```python [agent.py]
import asyncio

from veadk import Agent
from veadk.tools.demo_tools import get_city_weather

agent = Agent(tools=[get_city_weather])

response = asyncio.run(agent.run("北京天气怎么样？"))

print(response) # 北京天气晴朗，气温25°C。
```

### 选项

::field-group
  ::field{name="name" type="string"}
  默认为 `veAgent` - 智能体的名称
  ::

  ::field{name="description" type="string"}
  智能体的描述，这一属性在 A2A 场景中较为重要
  ::

  ::field{name="instruction" type="string | InstructionProvider"}
  智能体的系统提示词，定义了其行为逻辑
  ::

  ::field{name="model_name" type="string"}
  默认为 `doubao-seed-1-6-250615` - 用于运行智能体的模型名称
  ::

  ::field{name="model_provider" type="string"}
  默认为 `openai` - 符合 LiteLLM 规范的模型提供商
  ::

  ::field{name="model_api_base" type="string"}
  默认为 `https://ark.cn-beijing.volces.com/api/v1/` - 模型调用的 API 基础地址
  ::

  ::field{name="model_api_key" type="string"}
  模型调用所需的 API Key
  ::

  ::field{name="model_extra_config" type="dict"}
  模型请求的额外配置
  ::

  ::field{name="tools" type="list[ToolUnion] | None"}
  提供给智能体的工具列表
  ::

  ::field{name="sub_agents" type="list[BaseAgent] | None"}
  提供给该智能体的子智能体列表
  ::

  ::field{name="knowledgebase" type="KnowledgeBase | None"}
  提供给智能体的知识库
  ::

  ::field{name="short_term_memory" type="ShortTermMemory | None"}
  智能体的单会话上下文
  ::

  ::field{name="long_term_memory" type="LongTermMemory | None"}
  智能体的跨会话长期记忆（同一用户范围内）
  ::
::

::note
更多兼容字段请参考 [Google ADK LLM Agent 定义](https://github.com/google/adk-python/blob/main/src/google/adk/agents/llm_agent.py)。
::

## 工作流 Agent

### 定义方法

下面提供了不同类型工作流智能体的定义方法：

#### 顺序类 `SequentialAgent`

#### 循环类 `LoopAgent`

```python [loop_agent.py]

```

#### 并行类 `ParallelAgent`

```python [parallel_agent.py]

```

### 选项

工作流 Agent 采用统一的参数：

::field-group
  ::field{name="name" type="string"}
  智能体的名称
  ::

  ::field{name="description" type="string"}
  默认为 `DEFAULT_DESCRIPTION` - 智能体的描述，在 A2A 场景下会有帮助
  ::

  ::field{name="instruction" type="string"}
  默认为 `DEFAULT_INSTRUCTION` - 智能体的指令，例如函数调用的原则
  ::

  ::field{name="sub_agents" type="list[BaseAgent]"}
  默认为 `[]` - 提供给该智能体的子智能体列表
  ::

  ::field{name="tracers" type="list[BaseTracer]"}
  默认为 `[]` - 提供给该智能体的 tracer
  ::
::

::note
更多兼容字段请参考 [Google ADK Agents 定义](https://github.com/google/adk-python/blob/main/src/google/adk/agents/)。
::

## 多智能体协作

使用 VeADK 可以构建多 Agent 协作， 主 Agent 通过 `sub_agents` 机制协调多个子 Agent 完成复杂任务。

### 自主决策 Agent

利用能够自主决策的 Agent 来定义一个生活提醒智能体，分别定义了三个智能体：

- `weather_reporter`：负责通过 `get_city_weather` 工具来获取指定城市的天气信息
- `suggester`：根据天气情况给出穿衣建议
- `planner`：作为“调度员”，先调用 `weather_reporter` 获取天气，再调用 `suggester` 获取建议，最后将结果整合返回给用户。

```python [agent.py]
import asyncio

from veadk import Agent, Runner
from veadk.tools.demo_tools import get_city_weather

weather_reporter = Agent(
    name="weather_reporter",
    description="A weather reporter agent to report the weather.",
    tools=[get_city_weather],
)

suggester = Agent(
    name="suggester",
    description="A suggester agent that can give some clothing suggestions according to a city's weather.",
)

planner_agent = Agent(
    name="planner",
    description="A planner that can generate a suggestion according to a city's weather.",
    instruction="Invoke weather reporter agent first to get the weather, then invoke suggester agent to get the suggestion. Return the final response to user.",
    sub_agents=[weather_reporter, suggester],
)

runner = Runner(planner_agent)
response = asyncio.run(runner.run("北京穿衣建议"))

print(response)
# Based on the weather in Beijing today - Sunny with a temperature of 25°C, here are some clothing suggestions for you:

# It's a comfortable and warm day. You can choose light and breathable clothes. For example, a short - sleeved T - shirt or a thin shirt paired with casual pants or a skirt would be great. Since it's sunny, don't forget to wear a hat and sunglasses to protect yourself from the sun. Also, you can carry a light jacket in case the temperature drops in the evening, but it might not be necessary. Enjoy your day in Beijing!
```

### `SequentialAgent`

```python [sequential_agent.py]
import asyncio

from veadk import Agent, Runner
from veadk.agents.sequential_agent import SequentialAgent

greeting_agent = Agent(
    name="greeting_agent",
    description="A friendly agent that greets the user.",
    instruction="Greet the user warmly.",
)

goodbye_agent = Agent(
    name="goodbye_agent",
    description="A polite agent that says goodbye to the user.",
    instruction="Say goodbye to the user politely.",
)

root_agent = SequentialAgent(sub_agents=[greeting_agent, goodbye_agent])

runner = Runner(root_agent)
response = asyncio.run(runner.run("你好"))

print(response)
```

### `LoopAgent`

```python [loop_agent.py]

```

### `ParallelAgent`

```python [parallel_agent.py]

```
