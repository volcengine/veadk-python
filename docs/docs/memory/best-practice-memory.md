---
title: 最佳实践
---

本文档介绍如何在企业级场景中，将短期记忆与长期记忆结合使用，以实现高效、连续且个性化的智能体交互体验。

## 系统名称

客户支持智能助理

## 场景描述

一家企业希望构建一个智能客服系统，用于处理客户咨询、问题跟踪和多轮交互。
该系统需要满足以下要求：

1. **多轮会话连续性**：在同一会话中，智能体应记住客户之前的提问和上下文，避免重复询问；
2. **跨会话记忆**：当客户在不同时间段再次咨询时，智能体应能识别用户历史信息，并提供个性化建议；
3. **工具调用与记录**：智能体可调用内部知识库、CRM 系统和工单系统，并将结果与上下文关联保存。

在该场景中：

* **短期记忆**负责保存当前会话的上下文信息，包括用户最新问题、已提供的回答、工具调用结果；
* **长期记忆**负责保存跨会话的客户信息、历史工单状态、偏好设置，以及常见问题解答的知识库索引。

## Agent 设计

构建思路：

1. **初始化智能体与短期记忆**

   * 短期记忆存储当前会话信息，快速访问上下文，保证多轮对话连贯。
2. **配置长期记忆 Backend**

   * 长期记忆用于存储用户历史数据及跨会话重要信息。
3. **交互时的流程**

   * 用户发送消息 → Agent 从短期记忆获取会话上下文 → 检查长期记忆是否有相关历史信息 → 执行推理与工具调用 → 更新短期记忆与长期记忆。

## 运行流程

mermaid 图

```
# 占位: 多轮对话示例，展示短期记忆和长期记忆交互逻辑
# 1. 用户发起问题
# 2. Agent 检索短期记忆
# 3. Agent 查询长期记忆（历史工单/偏好）
# 4. Agent 调用工具（知识库/CRM/工单系统）
# 5. Agent 回复用户
# 6. 更新短期记忆和长期记忆
```

## Start code!

### 准备工作

### Agent 定义

### 运行

## 结果

1. **短期记忆效果**：

   * 保证单次会话中问题与上下文的连贯性；
   * 在同一会话内，智能体能够直接引用前面用户提供的信息；
   * 示例：用户问“我上次提交的工单状态如何？”，Agent 能立即引用该会话内上下文。

2. **长期记忆效果**：

   * 跨会话记录用户信息及历史操作；
   * 示例：用户下次登录时，智能体可以识别客户身份，并提供个性化推荐或提醒，例如“上次提交的工单已解决，您是否需要新的支持？”

3. **结合效果**：

   * 智能体可以同时访问短期与长期记忆，实现“会话内连续性 + 跨会话知识积累”；
   * 提高响应准确性和用户满意度，减少重复操作与人工干预；
   * 支持复杂业务流程，例如连续追踪多个工单或进行长期项目管理。

```
# 占位: 结果示意图或 JSON 输出示例
# {
#   "user_id": "12345",
#   "current_session": {
#       "short_term_memory": {...},
#       "latest_query": "...",
#       "tool_calls": [...]
#   },
#   "long_term_memory": {
#       "previous_sessions": [...],
#       "preferences": {...},
#       "historical_tickets": [...]
#   },
#   "agent_response": "根据您的历史工单，最新状态为..."
# }
```

通过这种方式，企业智能体能够实现既快速响应当前会话，又具备跨时间、跨任务的记忆能力，从而提供高质量、可持续的客户体验。
